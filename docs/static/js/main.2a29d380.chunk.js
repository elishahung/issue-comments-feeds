(this["webpackJsonpissue-comments-feeds"]=this["webpackJsonpissue-comments-feeds"]||[]).push([[0],{129:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n(0),o=n.n(c),r=n(11),i=n.n(r),s=(n(41),n(42),n(5)),u=n(34),m=n.n(u),d=n(6),l=Object(d.b)({name:"comments",initialState:[],reducers:{addComments:function(e,t){return[].concat(Object(a.a)(e),Object(a.a)(t.payload))}}}),f=Object(d.b)({name:"ui",initialState:{stat:"WAIT",repo:"moonshinevfx/4drec",page:1,isFetching:!1},reducers:{updateStat:function(e,t){e.stat=t.payload},increPage:function(e){e.page=e.page+1},finishPage:function(e){e.page=-1},startFetching:function(e){e.isFetching=!0},finishFetching:function(e){e.isFetching=!1}}}),p={ui:f.reducer,comments:l.reducer},h=(n(48),n(35)),g=n.n(h),b=n(22),v=n.n(b),E=function(e){var t=e.comment,n=v()(t.updated_at),a=(new v.a).diff(n,"days");return o.a.createElement("div",{className:"comment-feed"},o.a.createElement("div",{className:"meta"},o.a.createElement("img",{src:t.user.avatar_url,alt:"avatar"}),o.a.createElement("a",{href:t.user.html_url,target:"_blank",rel:"noopener noreferrer",className:"username"},t.user.login),o.a.createElement("span",null,"\xa0commented\xa0"),o.a.createElement("span",{className:"date"},a<3?n.fromNow():n.format("[on ]D MMM"))),o.a.createElement(g.a,{className:"markdown-body",source:t.body}))},w=function(){var e=Object(s.c)((function(e){return e.comments})),t=Object(s.c)((function(e){return e.ui})),n=Object(s.b)();return o.a.createElement(m.a,{className:"comment-feed-list",pageStart:0,loadMore:function(){return n((function(e,t){e(f.actions.startFetching());var n=t().ui.repo,a={sort:"updated",direction:"desc",per_page:10,page:t().ui.page},c=new Headers,o="https://api.github.com/repos/".concat(n,"/issues/comments?")+"sort=".concat(a.sort,"&")+"direction=".concat(a.direction,"&")+"per_page=".concat(a.per_page,"&")+"page=".concat(a.page);fetch(o,{headers:c}).then((function(t){return 200===t.status?(e(f.actions.updateStat("DONE")),t.json()):(e(f.actions.updateStat("FAIL")),!1)})).then((function(t){t&&(0!==t.length?(e(f.actions.increPage()),e(l.actions.addComments(t))):e(f.actions.finishPage()))})).then((function(){e(f.actions.finishFetching())}))}))},hasMore:!t.isFetching&&-1!==t.page&&"FAIL"!==t.stat,threshold:1024,useWindow:!0},e.map((function(e){return o.a.createElement(E,{key:e.id,comment:e})})))},j=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(128);var O=n(7),F=[].concat(Object(a.a)(Object(d.c)()),[O.a,!1]).filter(Boolean),N=Object(d.a)({reducer:p,middleware:F});i.a.render(o.a.createElement(s.a,{store:N},o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,n){e.exports=n(129)},41:function(e,t,n){},42:function(e,t,n){}},[[36,1,2]]]);
//# sourceMappingURL=main.2a29d380.chunk.js.map